
# Build configuration for Circle CI
#
 
general:
    artifacts:
        - /home/ubuntu/com.nikkei.dive.DiveApplication/app/build/outputs/apk/
 
machine:
    environment:
        ANDROID_HOME: /usr/local/android-sdk-linux
 
dependencies:
    override:
        - echo y | android update sdk --no-ui --all --filter tools,platform-tools,build-tools-21.0.2,android-21,extra-google-m2repository,extra-google-google_play_services,extra-android-support
        - ANDROID_HOME=/usr/local/android-sdk-linux ./gradlew dependencies
 
test:
    override:
        - (./gradlew assemble):
after_success:
  # upload APK file to Google Drive after success
  # change directory to [bin] folder
  #- cd /home/travis/build/Nikkei/dive_android/bin/
  - cd /home/travis/build/atulatb/TestTravis/bin/
  # copy python file
  - cp /home/travis/build/atulatb/TestTravis/test4travis/GDriveUploader.py GDriveUploader.py
  # call python file to upload APK to Google Drive
  - python GDriveUploader.py

  # Calabash Android - auto test
  # change directory to [calabash]
  #- cd /home/travis/build/Nikkei/dive_android/calabash
  # copy apk file
  #- cp /home/travis/build/Nikkei/dive_android/bin/Nikkei_Dive-debug.apk NikkeiDive.apk
  # list all files
  - ls
  # Calabash Android - resign apk file
 # - calabash-android resign NikkeiDive.apk
  # list all android devices
  #- adb devices
  #- adb install -r NikkeiDive.apk
  # unlock if Andorid VM locked
 # - adb shell input keyevent KEYCODE_MENU
  # Calabash Android - run
 # - calabash-android run NikkeiDive.apk  -v

# Travis CI can notify you about your build results through email, IRC and/or webhooks.
notifications:
  # stop notify via email
  email: false
  # notify to Slack
 # slack: nikkeidevs:YE7xexyfMPeAGkxxRcTE0xtG